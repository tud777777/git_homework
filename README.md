# Домашнее задание к занятию «Введение в микросервисы» - Баграш Фёдор

# Выбор решения для реализации API Gateway  

## Сравнительная таблица решений  

| Решение                 | Маршрутизация запросов | Аутентификация            | Терминация HTTPS | Дополнительные возможности |
|-------------------------|----------------------|--------------------------|------------------|---------------------------|
| **Kong Gateway**       | ✅ Да                 | ✅ Плагины (JWT, OAuth2)  | ✅ Встроенная поддержка | Расширяемость через плагины, масштабируемость |
| **NGINX**              | ✅ Да (через конфигурацию) | ⚠️ Требует LUA-модулей | ✅ Встроенная поддержка | Высокая производительность, гибкость |
| **Traefik**            | ✅ Автоматическая маршрутизация | ✅ Интеграция с OIDC, OAuth | ✅ Встроенная поддержка | Автоматическая конфигурация, интеграция с Kubernetes |
| **AWS API Gateway**    | ✅ Да (управляется AWS) | ✅ Интеграция с IAM, Cognito | ✅ Встроенная поддержка | Глубокая интеграция с AWS-сервисами |
| **Apigee (Google)**    | ✅ Да                 | ✅ Интеграция с IAM, OAuth | ✅ Встроенная поддержка | Мониторинг, аналитика, интеграция с GCP |
| **Azure API Management** | ✅ Да                 | ✅ Интеграция с Azure AD | ✅ Встроенная поддержка | Глубокая интеграция с Azure-сервисами |

## Выбор решения  

На основе таблицы оптимальным вариантом является **Kong Gateway**.  

### Обоснование выбора  

- Поддержка гибкой маршрутизации запросов.  
- Возможность проверки аутентификации через встроенные плагины.  
- Нативная поддержка терминации HTTPS.  
- Хорошая масштабируемость и возможность интеграции с Kubernetes и облачными решениями.  
- Открытый исходный код и активное сообщество, что делает его универсальным для разных инфраструктур.  

Если требуется облачное управляемое решение, то **AWS API Gateway** или **Apigee** будут хорошими вариантами, но они привязывают к экосистеме конкретного облачного провайдера.


# Сравнение брокеров сообщений и выбор оптимального решения  

## Сравнительная таблица брокеров сообщений  

| Брокер сообщений  | Кластеризация | Хранение сообщений | Высокая скорость | Поддержка форматов | Разделение прав | Простота эксплуатации |
|-------------------|--------------|--------------------|------------------|--------------------|----------------|----------------------|
| **RabbitMQ**      | ✅ Да (с High Availability) | ✅ Да (Persistent queues) | ⚠️ Средняя (тысячи сообщений в секунду) | ✅ JSON, XML, Protobuf, текст | ✅ Гибкие политики доступа | ⚠️ Средняя, требуется настройка |
| **Apache Kafka**  | ✅ Да (ISR, репликация) | ✅ Да (Log-based storage) | ✅ Высокая (миллионы сообщений в секунду) | ✅ JSON, Avro, Protobuf | ✅ ACL на уровне топиков | ⚠️ Сложная в управлении |
| **Redis Streams** | ⚠️ Ограниченная (Sentinel, Cluster) | ✅ Да (но в памяти) | ✅ Очень высокая | ✅ JSON, бинарные данные | ✅ ACL на уровне ключей | ✅ Простая |
| **NATS JetStream** | ✅ Да (Clustering, RAFT) | ✅ Да | ✅ Высокая | ✅ JSON, Protobuf | ✅ ACL и токены | ✅ Простая |
| **ActiveMQ**      | ✅ Да (Master-Slave, Network of Brokers) | ✅ Да | ⚠️ Средняя | ✅ JSON, XML, Protobuf | ✅ Ролевые ACL | ⚠️ Сложная |
| **Pulsar**        | ✅ Да (Segmented Storage, BookKeeper) | ✅ Да (BookKeeper) | ✅ Высокая | ✅ JSON, Avro, Protobuf | ✅ Гибкая RBAC | ⚠️ Средняя |

---

## Выбор решения  

### **Лучший вариант: Apache Kafka**  

### **Обоснование выбора**  

- **Надёжность и масштабируемость**: Поддерживает кластеризацию, репликацию и отказоустойчивость.  
- **Производительность**: Миллионы сообщений в секунду, оптимизирован для больших нагрузок.  
- **Хранение сообщений**: Дисковое хранилище (Log-based), что обеспечивает долговременное хранение.  
- **Гибкость**: Поддержка различных форматов данных (JSON, Avro, Protobuf).  
- **Безопасность**: ACL на уровне топиков для разделения прав доступа.  
- **Минусы**: Требуется сложная настройка и управление, но это компенсируется высокой стабильностью.  

### **Альтернативный вариант**  
Если важна **простота эксплуатации** и лёгкость интеграции, альтернативным решением может быть **NATS JetStream**.  
